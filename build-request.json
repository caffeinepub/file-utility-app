{
  "kind": "build_request",
  "title": "Lock admin access to hardcoded Principal ID",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-42",
      "text": "In `backend/main.mo`, hardcode the Principal `s4myo-xkgcs-g3v6k-ebulj-irmjb-jkgr6-5mytx-gcqbz-a3qgn-fy7zr-yae` as the sole authorized admin. The `getPendingVerifications()` and `approveUTR()` methods must reject any caller whose principal does not match this hardcoded value, returning an access-denied error (e.g., `#err(\"Access denied. Admin only.\")`). Remove any dynamic admin-registration logic (e.g., `initAdmin()`) if still present in the actor.",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "lock the admin access for all people and give access to only this Principal ID- s4myo-xkgcs-g3v6k-ebulj-irmjb-jkgr6-5mytx-gcqbz-a3qgn-fy7zr-yae"
        ]
      },
      "acceptanceCriteria": [
        "The Principal `s4myo-xkgcs-g3v6k-ebulj-irmjb-jkgr6-5mytx-gcqbz-a3qgn-fy7zr-yae` is hardcoded in `backend/main.mo` as a constant.",
        "`getPendingVerifications()` returns an access-denied error for any caller whose principal does not match the hardcoded admin principal.",
        "`approveUTR()` returns an access-denied error for any caller whose principal does not match the hardcoded admin principal.",
        "The hardcoded admin principal can successfully call both `getPendingVerifications()` and `approveUTR()` without receiving an access-denied error.",
        "No dynamic admin-registration method (e.g., `initAdmin()`) exists or affects admin authorization."
      ]
    },
    {
      "id": "REQ-43",
      "text": "In `frontend/src/components/AdminPanel.tsx`, restore the access-denied guard: when `getPendingVerifications()` returns an access-denied error from the backend, display the message 'Access denied. Admin only.' to the user instead of the pending verifications list. Do not add the `/admin` route to the main tab navigation bar.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Restore the 'Access denied. Admin only.' message for unauthorized callers, so non-admin users visiting `/admin` see a denial screen."
        ]
      },
      "acceptanceCriteria": [
        "When a non-admin user visits `/admin`, the `getPendingVerifications()` call returns an access-denied error and `AdminPanel.tsx` renders the message 'Access denied. Admin only.' instead of any verifications list.",
        "When the hardcoded admin principal visits `/admin`, the verifications list is rendered normally with no access-denied message.",
        "The `/admin` route does not appear in the main tab navigation bar."
      ]
    }
  ],
  "constraints": [
    "The admin Principal `s4myo-xkgcs-g3v6k-ebulj-irmjb-jkgr6-5mytx-gcqbz-a3qgn-fy7zr-yae` must be hardcoded exactly as provided â€” do not alter or truncate it.",
    "Do not add the /admin route to the main tab navigation bar.",
    "Do not edit any immutable frontend paths listed in the system context."
  ],
  "nonGoals": [
    "Adding any new admin-registration or dynamic admin-assignment flow.",
    "Changing the visual design or layout of the AdminPanel beyond restoring the access-denied message.",
    "Modifying any other backend methods unrelated to admin access control."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}